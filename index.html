<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Countdown to the Taido 2025 Convention</title>
  <style>
    /* Make body transparent and remove default margins */
    body {
      margin: 0;
      padding: 0;
      background: transparent;
    }

    /* Overall container */
    #countdown-container {
      text-align: center;
      margin: 40px;
    }

    /* Common font styling for all time parts */
    .time-part {
      font-family: Arial, sans-serif;
      font-size: 60px; /* Adjust to your preference */
      font-weight: bold;
      color: #000; /* Black text */
      background: transparent;
    }

    /*
      We want only the seconds to flip.
      So #seconds is given "display: inline-block" to allow the 3D flip animation.
    */
    #seconds {
      display: inline-block;
    }

    /* Keyframe for a simple "flip" animation */
    @keyframes flip {
      0% {
        transform: rotateX(0deg);
      }
      25% {
        transform: rotateX(90deg);
      }
      50% {
        transform: rotateX(270deg);
      }
      75% {
        transform: rotateX(360deg);
      }
      100% {
        transform: rotateX(360deg);
      }
    }
  </style>
</head>
<body>
  <div id="countdown-container">
    <span id="days" class="time-part"></span>d :
    <span id="hours" class="time-part"></span>h :
    <span id="minutes" class="time-part"></span>m :
    <span id="seconds" class="time-part"></span>s
  </div>

  <script>
    // Function to figure out the next July 24
    function getNextJuly24() {
      const now = new Date();
      const currentYear = now.getFullYear();
      const july24ThisYear = new Date(`July 24, ${currentYear} 00:00:00`);
      
      // If today's date/time is >= July 24 this year, move to next year's July 24
      if (now >= july24ThisYear) {
        return new Date(`July 24, ${currentYear + 1} 00:00:00`).getTime();
      }
      return july24ThisYear.getTime();
    }

    const targetDate = getNextJuly24();

    // Cache references to the spans
    const daysEl = document.getElementById('days');
    const hoursEl = document.getElementById('hours');
    const minutesEl = document.getElementById('minutes');
    const secondsEl = document.getElementById('seconds');

    function updateCountdown() {
      const now = new Date().getTime();
      let distance = targetDate - now;

      // If the date is reached or passed, reset to next year's date
      if (distance <= 0) {
        location.reload(); // or handle it another way if you prefer
        return;
      }

      // Calculate days, hours, minutes, seconds
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      distance %= (1000 * 60 * 60 * 24);
      const hours = Math.floor(distance / (1000 * 60 * 60));
      distance %= (1000 * 60 * 60);
      const minutes = Math.floor(distance / (1000 * 60));
      distance %= (1000 * 60);
      const seconds = Math.floor(distance / 1000);

      // Optional: Zero-pad the numbers (e.g. 01, 02) if you want consistent formatting
      const daysStr = String(days).padStart(2, '0');
      const hoursStr = String(hours).padStart(2, '0');
      const minutesStr = String(minutes).padStart(2, '0');
      const secondsStr = String(seconds).padStart(2, '0');

      // Update days/hours/minutes WITHOUT animation
      daysEl.textContent = daysStr;
      hoursEl.textContent = hoursStr;
      minutesEl.textContent = minutesStr;

      // Update the seconds WITH a flip animation each time
      // 1) Temporarily remove the animation so we can re-trigger it
      secondsEl.style.animation = 'none';
      secondsEl.offsetHeight; // forces a reflow
      // 2) Reapply the animation
      secondsEl.style.animation = 'flip 0.8s';
      // 3) Update the text
      secondsEl.textContent = secondsStr;
    }

    // Run once immediately
    updateCountdown();

    // Update every second
    setInterval(updateCountdown, 1000);
  </script>
</body>
</html>
